<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>

<StackPane xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="com.farmingcmulator.controller.StoreController"
           styleClass="store-bg"
           prefWidth="1920" prefHeight="1080">
    <ImageView fitHeight="1080.0" fitWidth="2440.0" pickOnBounds="true" preserveRatio="true">
        <image>
            <Image url="@../images/store.jpg" />
        </image>
    </ImageView>

    <BorderPane>

        <!-- HEADER - Dark Brown Theme -->
        <top>
            <HBox styleClass="store-header-bar" spacing="30" alignment="CENTER">
                <padding>
                    <Insets top="18" right="50" bottom="18" left="50"/>
                </padding>
                <Label text="FARM STORE" styleClass="store-title"/>
                <Region HBox.hgrow="ALWAYS"/>
                <HBox spacing="25" alignment="CENTER">
                    <Label fx:id="coinsLabel" text="100 coins" style="-fx-font-family: 'Georgia'; -fx-font-size: 22px; -fx-text-fill: #FFD966; -fx-font-weight: bold;"/>
                    <Label text="|" style="-fx-font-size: 22px; -fx-text-fill: rgba(255,255,255,0.3);"/>
                    <Label fx:id="actionsLabel" text="Actions: 10" style="-fx-font-family: 'Segoe UI'; -fx-font-size: 18px; -fx-text-fill: #A8E09A; -fx-font-weight: bold;"/>
                    <Label text="|" style="-fx-font-size: 22px; -fx-text-fill: rgba(255,255,255,0.3);"/>
                    <Label fx:id="levelLabel" text="Level 1" style="-fx-font-family: 'Segoe UI'; -fx-font-size: 18px; -fx-text-fill: #87CEEB; -fx-font-weight: bold;"/>
                </HBox>
            </HBox>
        </top>

        <!-- MAIN CONTENT - TWO SECTIONS -->
        <center>
            <HBox alignment="CENTER" spacing="60">
                <padding>
                    <Insets top="30" right="80" bottom="30" left="80"/>
                </padding>

                <!-- LEFT SECTION: SEED BOXES -->
                <VBox alignment="CENTER" spacing="20">

                    <Label text="SEED BOXES" style="-fx-font-family: 'Georgia'; -fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #FDF8E8; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.7), 5, 0.5, 0, 2);"/>
                    <Label text="Buy boxes to get random seeds for your farm!" style="-fx-font-family: 'Segoe UI'; -fx-font-size: 14px; -fx-text-fill: #FDF8E8; -fx-font-style: italic; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.6), 3, 0.5, 0, 1);"/>

                    <Region prefHeight="10"/>

                    <!-- Box Cards -->
                    <HBox alignment="CENTER" spacing="20">

                        <!-- COMMON BOX -->
                        <VBox styleClass="store-box" alignment="CENTER" spacing="10">
                            <padding><Insets top="22" right="22" bottom="22" left="22"/></padding>
                            <ImageView fitWidth="64" fitHeight="64" preserveRatio="true">
                                <image><Image url="@../images/store/box_common.png"/></image>
                            </ImageView>
                            <Label text="COMMON BOX" styleClass="store-box-title" style="-fx-text-fill: #757575;"/>
                            <VBox alignment="CENTER" spacing="3">
                                <Label text="Basic seeds for beginners" styleClass="store-box-desc"/>
                                <Label text="Mostly Common crops" style="-fx-font-size: 12px; -fx-text-fill: #9E9E9E;"/>
                            </VBox>
                            <Region prefHeight="5"/>
                            <Label text="50 coins" styleClass="store-box-price"/>
                            <Button text="BUY" onAction="#onBuyCommonBox" styleClass="store-btn-common" prefWidth="100" prefHeight="35"/>
                        </VBox>

                        <!-- RARE BOX -->
                        <VBox styleClass="store-box, store-box-rare" alignment="CENTER" spacing="10">
                            <padding><Insets top="22" right="22" bottom="22" left="22"/></padding>
                            <ImageView fitWidth="64" fitHeight="64" preserveRatio="true">
                                <image><Image url="@../images/store/box_rare.png"/></image>
                            </ImageView>
                            <Label text="RARE BOX" styleClass="store-box-title" style="-fx-text-fill: #1E88E5;"/>
                            <VBox alignment="CENTER" spacing="3">
                                <Label text="Better chance of getting" styleClass="store-box-desc"/>
                                <Label text="Rare crops" style="-fx-font-size: 12px; -fx-text-fill: #1E88E5; -fx-font-weight: bold;"/>
                            </VBox>
                            <Region prefHeight="5"/>
                            <Label text="100 coins" styleClass="store-box-price"/>
                            <Button text="BUY" onAction="#onBuyRareBox" styleClass="store-btn-rare" prefWidth="100" prefHeight="35"/>
                        </VBox>

                        <!-- EPIC BOX -->
                        <VBox styleClass="store-box, store-box-epic" alignment="CENTER" spacing="10">
                            <padding><Insets top="22" right="22" bottom="22" left="22"/></padding>
                            <ImageView fitWidth="64" fitHeight="64" preserveRatio="true">
                                <image><Image url="@../images/store/box_epic.png"/></image>
                            </ImageView>
                            <Label text="EPIC BOX" styleClass="store-box-title" style="-fx-text-fill: #8E24AA;"/>
                            <VBox alignment="CENTER" spacing="3">
                                <Label text="High chance of getting" styleClass="store-box-desc"/>
                                <Label text="Epic and Legendary!" style="-fx-font-size: 12px; -fx-text-fill: #8E24AA; -fx-font-weight: bold;"/>
                            </VBox>
                            <Region prefHeight="5"/>
                            <Label text="200 coins" styleClass="store-box-price"/>
                            <Button text="BUY" onAction="#onBuyEpicBox" styleClass="store-btn-epic" prefWidth="100" prefHeight="35"/>
                        </VBox>

                    </HBox>

                    <Region prefHeight="12"/>

                    <!-- Rarity Guide -->
                    <HBox alignment="CENTER" spacing="18" style="-fx-background-color: rgba(0,0,0,0.4); -fx-background-radius: 12; -fx-padding: 10 20;">
                        <Label text="Common" style="-fx-text-fill: #BDBDBD; -fx-font-size: 13px;"/>
                        <Label text="Uncommon" style="-fx-text-fill: #66BB6A; -fx-font-size: 13px;"/>
                        <Label text="Rare" style="-fx-text-fill: #42A5F5; -fx-font-size: 13px;"/>
                        <Label text="Epic" style="-fx-text-fill: #AB47BC; -fx-font-size: 13px;"/>
                        <Label text="Legendary" style="-fx-text-fill: #FFB300; -fx-font-size: 13px; -fx-font-weight: bold;"/>
                    </HBox>

                </VBox>

                <!-- DIVIDER -->
                <Region style="-fx-background-color: rgba(255,255,255,0.15); -fx-pref-width: 2; -fx-min-height: 350;"/>

                <!-- RIGHT SECTION: UPGRADES -->
                <VBox alignment="CENTER" spacing="20">

                    <Label text="UPGRADES" style="-fx-font-family: 'Georgia'; -fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #FDF8E8; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.7), 5, 0.5, 0, 2);"/>
                    <Label text="Improve your farming tools!" style="-fx-font-family: 'Segoe UI'; -fx-font-size: 14px; -fx-text-fill: #FDF8E8; -fx-font-style: italic; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.6), 3, 0.5, 0, 1);"/>

                    <Region prefHeight="10"/>

                    <!-- Upgrade Cards -->
                    <HBox alignment="CENTER" spacing="25">

                        <!-- WATER UPGRADE -->
                        <VBox fx:id="waterUpgradeCard" styleClass="upgrade-card, upgrade-card-water" alignment="CENTER" spacing="8" prefWidth="180">
                            <padding><Insets top="18" right="20" bottom="18" left="20"/></padding>
                            <ImageView fitWidth="52" fitHeight="52" preserveRatio="true">
                                <image><Image url="@../images/store/upgrade_water.png"/></image>
                            </ImageView>
                            <Label text="WATER" styleClass="upgrade-title" style="-fx-text-fill: #3498db;"/>
                            <Label fx:id="waterUpgradeLevelLabel" text="Level 0/2" styleClass="upgrade-level"/>
                            <Label fx:id="waterUpgradeEffectLabel" text="Capacity: 1" styleClass="upgrade-effect" style="-fx-text-fill: #3498db;"/>
                            <Region prefHeight="3"/>
                            <Label fx:id="waterUpgradeCostLabel" text="150 coins" styleClass="upgrade-cost"/>
                            <Label fx:id="waterUpgradeReqLabel" text="Requires Lv.5" styleClass="upgrade-req"/>
                            <Button fx:id="waterUpgradeBtn" text="UPGRADE" onAction="#onWaterUpgrade" styleClass="upgrade-btn" prefWidth="100"/>
                        </VBox>

                        <!-- HARVEST UPGRADE -->
                        <VBox fx:id="harvestUpgradeCard" styleClass="upgrade-card, upgrade-card-harvest" alignment="CENTER" spacing="8" prefWidth="180">
                            <padding><Insets top="18" right="20" bottom="18" left="20"/></padding>
                            <ImageView fitWidth="52" fitHeight="52" preserveRatio="true">
                                <image><Image url="@../images/store/upgrade_harvest.png"/></image>
                            </ImageView>
                            <Label text="HARVEST" styleClass="upgrade-title" style="-fx-text-fill: #27ae60;"/>
                            <Label fx:id="harvestUpgradeLevelLabel" text="Level 0/5" styleClass="upgrade-level"/>
                            <Label fx:id="harvestUpgradeEffectLabel" text="Bonus: +0%" styleClass="upgrade-effect" style="-fx-text-fill: #27ae60;"/>
                            <Region prefHeight="3"/>
                            <Label fx:id="harvestUpgradeCostLabel" text="50 coins" styleClass="upgrade-cost"/>
                            <Label fx:id="harvestUpgradeReqLabel" text="Requires Lv.3" styleClass="upgrade-req"/>
                            <Button fx:id="harvestUpgradeBtn" text="UPGRADE" onAction="#onHarvestUpgrade" styleClass="upgrade-btn" prefWidth="100"/>
                        </VBox>

                    </HBox>

                    <Region prefHeight="12"/>

                    <!-- Upgrade Info -->
                    <HBox alignment="CENTER" spacing="25" style="-fx-background-color: rgba(0,0,0,0.4); -fx-background-radius: 12; -fx-padding: 12 25;">
                        <VBox alignment="CENTER" spacing="2">
                            <Label text="Water" style="-fx-text-fill: #3498db; -fx-font-size: 13px; -fx-font-weight: bold;"/>
                            <Label text="+1 capacity per level" style="-fx-text-fill: #CCCCCC; -fx-font-size: 11px;"/>
                        </VBox>
                        <Label text="|" style="-fx-text-fill: rgba(255,255,255,0.3); -fx-font-size: 20px;"/>
                        <VBox alignment="CENTER" spacing="2">
                            <Label text="Harvest" style="-fx-text-fill: #27ae60; -fx-font-size: 13px; -fx-font-weight: bold;"/>
                            <Label text="+2% bonus per level" style="-fx-text-fill: #CCCCCC; -fx-font-size: 11px;"/>
                        </VBox>
                    </HBox>

                </VBox>

            </HBox>
        </center>

        <!-- FOOTER -->
        <bottom>
            <HBox alignment="CENTER">
                <padding><Insets top="15" bottom="25"/></padding>
                <Button text="BACK TO FARM" onAction="#onBackClicked" styleClass="menu-btn-back" prefWidth="200" prefHeight="45"/>
            </HBox>
        </bottom>

    </BorderPane>

    <!-- INFO POPUP -->
    <VBox fx:id="infoPopup" styleClass="overlay-bg" alignment="CENTER" visible="false" managed="false">
        <VBox styleClass="popup-box-small" spacing="18" maxWidth="400" minWidth="350">
            <padding><Insets top="25" right="35" bottom="25" left="35"/></padding>
            <Label fx:id="infoPopupLabel" text="" styleClass="popup-text-small" wrapText="true"/>
            <Button text="OK" onAction="#onInfoPopupClose" styleClass="menu-btn-primary" prefWidth="100"/>
        </VBox>
    </VBox>

    <!-- CONFIRM POPUP -->
    <VBox fx:id="confirmPopup" styleClass="overlay-bg" alignment="CENTER" visible="false" managed="false">
        <VBox styleClass="popup-box" spacing="20" maxWidth="450" minWidth="400">
            <padding><Insets top="28" right="38" bottom="28" left="38"/></padding>
            <Label text="WARNING" styleClass="popup-title" style="-fx-text-fill: #E65100;"/>
            <Label fx:id="confirmPopupLabel" text="" styleClass="popup-message" wrapText="true"/>
            <HBox spacing="20" alignment="CENTER">
                <Button text="YES" onAction="#onConfirmYes" styleClass="menu-btn-danger" prefWidth="110" prefHeight="45"/>
                <Button text="NO" onAction="#onConfirmNo" styleClass="menu-btn-back" prefWidth="110" prefHeight="45"/>
            </HBox>
        </VBox>
    </VBox>

    <!-- PURCHASE RESULT POPUP -->
    <VBox fx:id="purchaseResultPopup" styleClass="overlay-bg" alignment="CENTER" visible="false" managed="false">
        <VBox styleClass="popup-box-success" spacing="20" maxWidth="420" minWidth="380">
            <padding><Insets top="30" right="40" bottom="30" left="40"/></padding>
            <Label text="SEED OBTAINED!" styleClass="popup-title-success"/>
            <Label fx:id="purchaseResultLabel" text="You got: Wheat" styleClass="harvest-crop-name"/>
            <Label fx:id="purchaseNewLabel" text="(Common)" style="-fx-font-size: 18px;"/>
            <Label text="Added to your inventory!" styleClass="popup-submessage"/>
            <Button text="NICE!" onAction="#onPurchaseResultClose" styleClass="menu-btn-primary" prefWidth="140" prefHeight="45"/>
        </VBox>
    </VBox>

</StackPane>
