<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<StackPane prefHeight="1080" prefWidth="1920" styleClass="store-bg" xmlns:fx="http://javafx.com/fxml/1" xmlns="http://javafx.com/javafx/25" fx:controller="com.farmingcmulator.controller.StoreController">
    <ImageView fitHeight="1080.0" fitWidth="1920.0" pickOnBounds="true">
        <image>
            <Image url="@../images/store.png" />
        </image>
    </ImageView>

    <BorderPane>

        <!-- HEADER - Dark Brown Theme -->
        <top>
            <HBox alignment="CENTER" spacing="30" styleClass="store-header-bar">
                <padding>
                    <Insets bottom="18" left="50" right="50" top="18" />
                </padding>
                <Label styleClass="store-title" text="FARM STORE" />
                <Region HBox.hgrow="ALWAYS" />
                <HBox alignment="CENTER" spacing="25">
                    <Label fx:id="coinsLabel" style="-fx-font-family: 'Georgia'; -fx-font-size: 22px; -fx-text-fill: #FFD966; -fx-font-weight: bold;" text="100 coins" />
                    <Label style="-fx-font-size: 22px; -fx-text-fill: rgba(255,255,255,0.3);" text="|" />
                    <Label fx:id="actionsLabel" style="-fx-font-family: 'Segoe UI'; -fx-font-size: 18px; -fx-text-fill: #A8E09A; -fx-font-weight: bold;" text="Actions: 10" />
                    <Label style="-fx-font-size: 22px; -fx-text-fill: rgba(255,255,255,0.3);" text="|" />
                    <Label fx:id="levelLabel" style="-fx-font-family: 'Segoe UI'; -fx-font-size: 18px; -fx-text-fill: #87CEEB; -fx-font-weight: bold;" text="Level 1" />
                </HBox>
            </HBox>
        </top>

        <!-- MAIN CONTENT - THREE SECTIONS -->
        <center>
            <HBox alignment="CENTER" spacing="40">
                <padding>
                    <Insets bottom="30" left="40" right="40" top="30" />
                </padding>

                <!-- LEFT SECTION: SEED BOXES -->
                <VBox alignment="CENTER" spacing="20">

                    <Label style="-fx-font-family: 'Georgia'; -fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #FDF8E8; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.7), 5, 0.5, 0, 2);" text="SEED BOXES" />
                    <Label style="-fx-font-family: 'Segoe UI'; -fx-font-size: 14px; -fx-text-fill: #FDF8E8; -fx-font-style: italic; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.6), 3, 0.5, 0, 1);" text="Buy boxes to get random seeds for your farm!" />

                    <Region prefHeight="10" />

                    <!-- Box Cards -->
                    <HBox alignment="CENTER" spacing="20">

                        <!-- COMMON BOX -->
                        <VBox alignment="CENTER" spacing="10" styleClass="store-box">
                            <padding><Insets bottom="22" left="22" right="22" top="22" /></padding>
                            <ImageView fitHeight="64" fitWidth="64" preserveRatio="true">
                                <image><Image url="@../images/store/box_common.png" /></image>
                            </ImageView>
                            <Label style="-fx-text-fill: #757575;" styleClass="store-box-title" text="COMMON BOX" />
                            <VBox alignment="CENTER" spacing="3">
                                <Label styleClass="store-box-desc" text="Basic seeds for beginners" />
                                <Label style="-fx-font-size: 12px; -fx-text-fill: #9E9E9E;" text="Mostly Common crops" />
                            </VBox>
                            <Region prefHeight="5" />
                            <Label styleClass="store-box-price" text="50 coins" />
                            <Button onAction="#onBuyCommonBox" prefHeight="35" prefWidth="100" styleClass="store-btn-common" text="BUY" />
                        </VBox>

                        <!-- RARE BOX -->
                        <VBox alignment="CENTER" spacing="10" styleClass="store-box, store-box-rare">
                            <padding><Insets bottom="22" left="22" right="22" top="22" /></padding>
                            <ImageView fitHeight="64" fitWidth="64" preserveRatio="true">
                                <image><Image url="@../images/store/box_rare.png" /></image>
                            </ImageView>
                            <Label style="-fx-text-fill: #1E88E5;" styleClass="store-box-title" text="RARE BOX" />
                            <VBox alignment="CENTER" spacing="3">
                                <Label styleClass="store-box-desc" text="Better chance of getting" />
                                <Label style="-fx-font-size: 12px; -fx-text-fill: #1E88E5; -fx-font-weight: bold;" text="Rare crops" />
                            </VBox>
                            <Region prefHeight="5" />
                            <Label styleClass="store-box-price" text="100 coins" />
                            <Button onAction="#onBuyRareBox" prefHeight="35" prefWidth="100" styleClass="store-btn-rare" text="BUY" />
                        </VBox>

                        <!-- EPIC BOX -->
                        <VBox alignment="CENTER" spacing="10" styleClass="store-box, store-box-epic">
                            <padding><Insets bottom="22" left="22" right="22" top="22" /></padding>
                            <ImageView fitHeight="64" fitWidth="64" preserveRatio="true">
                                <image><Image url="@../images/store/box_epic.png" /></image>
                            </ImageView>
                            <Label style="-fx-text-fill: #8E24AA;" styleClass="store-box-title" text="EPIC BOX" />
                            <VBox alignment="CENTER" spacing="3">
                                <Label styleClass="store-box-desc" text="High chance of getting" />
                                <Label style="-fx-font-size: 12px; -fx-text-fill: #8E24AA; -fx-font-weight: bold;" text="Epic and Legendary!" />
                            </VBox>
                            <Region prefHeight="5" />
                            <Label styleClass="store-box-price" text="200 coins" />
                            <Button onAction="#onBuyEpicBox" prefHeight="35" prefWidth="100" styleClass="store-btn-epic" text="BUY" />
                        </VBox>

                    </HBox>

                    <Region prefHeight="12" />

                    <!-- Rarity Guide -->
                    <HBox alignment="CENTER" spacing="18" style="-fx-background-color: rgba(0,0,0,0.4); -fx-background-radius: 12; -fx-padding: 10 20;">
                        <Label style="-fx-text-fill: #BDBDBD; -fx-font-size: 13px;" text="Common" />
                        <Label style="-fx-text-fill: #66BB6A; -fx-font-size: 13px;" text="Uncommon" />
                        <Label style="-fx-text-fill: #42A5F5; -fx-font-size: 13px;" text="Rare" />
                        <Label style="-fx-text-fill: #AB47BC; -fx-font-size: 13px;" text="Epic" />
                        <Label style="-fx-text-fill: #FFB300; -fx-font-size: 13px; -fx-font-weight: bold;" text="Legendary" />
                    </HBox>

                </VBox>

                <!-- DIVIDER -->
                <Region style="-fx-background-color: rgba(255,255,255,0.15); -fx-pref-width: 2; -fx-min-height: 350;" />

                <!-- RIGHT SECTION: UPGRADES -->
                <VBox alignment="CENTER" spacing="20">

                    <Label style="-fx-font-family: 'Georgia'; -fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #FDF8E8; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.7), 5, 0.5, 0, 2);" text="UPGRADES" />
                    <Label style="-fx-font-family: 'Segoe UI'; -fx-font-size: 14px; -fx-text-fill: #FDF8E8; -fx-font-style: italic; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.6), 3, 0.5, 0, 1);" text="Improve your farming tools!" />

                    <Region prefHeight="10" />

                    <!-- Upgrade Cards -->
                    <HBox alignment="CENTER" spacing="25">

                        <!-- WATER UPGRADE -->
                        <VBox fx:id="waterUpgradeCard" alignment="CENTER" prefWidth="180" spacing="8" styleClass="upgrade-card, upgrade-card-water">
                            <padding><Insets bottom="18" left="20" right="20" top="18" /></padding>
                            <ImageView fitHeight="52" fitWidth="52" preserveRatio="true">
                                <image><Image url="@../images/store/upgrade_water.png" /></image>
                            </ImageView>
                            <Label style="-fx-text-fill: #3498db;" styleClass="upgrade-title" text="WATER" />
                            <Label fx:id="waterUpgradeLevelLabel" styleClass="upgrade-level" text="Level 0/2" />
                            <Label fx:id="waterUpgradeEffectLabel" style="-fx-text-fill: #3498db;" styleClass="upgrade-effect" text="Capacity: 1" />
                            <Region prefHeight="3" />
                            <Label fx:id="waterUpgradeCostLabel" styleClass="upgrade-cost" text="150 coins" />
                            <Label fx:id="waterUpgradeReqLabel" styleClass="upgrade-req" text="Requires Lv.5" />
                            <Button fx:id="waterUpgradeBtn" onAction="#onWaterUpgrade" prefWidth="100" styleClass="upgrade-btn" text="UPGRADE" />
                        </VBox>

                        <!-- HARVEST UPGRADE -->
                        <VBox fx:id="harvestUpgradeCard" alignment="CENTER" prefWidth="180" spacing="8" styleClass="upgrade-card, upgrade-card-harvest">
                            <padding><Insets bottom="18" left="20" right="20" top="18" /></padding>
                            <ImageView fitHeight="52" fitWidth="52" preserveRatio="true">
                                <image><Image url="@../images/store/upgrade_harvest.png" /></image>
                            </ImageView>
                            <Label style="-fx-text-fill: #27ae60;" styleClass="upgrade-title" text="HARVEST" />
                            <Label fx:id="harvestUpgradeLevelLabel" styleClass="upgrade-level" text="Level 0/5" />
                            <Label fx:id="harvestUpgradeEffectLabel" style="-fx-text-fill: #27ae60;" styleClass="upgrade-effect" text="Bonus: +0%" />
                            <Region prefHeight="3" />
                            <Label fx:id="harvestUpgradeCostLabel" styleClass="upgrade-cost" text="50 coins" />
                            <Label fx:id="harvestUpgradeReqLabel" styleClass="upgrade-req" text="Requires Lv.3" />
                            <Button fx:id="harvestUpgradeBtn" onAction="#onHarvestUpgrade" prefWidth="100" styleClass="upgrade-btn" text="UPGRADE" />
                        </VBox>

                    </HBox>

                    <Region prefHeight="12" />

                    <!-- Upgrade Info -->
                    <HBox alignment="CENTER" spacing="25" style="-fx-background-color: rgba(0,0,0,0.4); -fx-background-radius: 12; -fx-padding: 12 25;">
                        <VBox alignment="CENTER" spacing="2">
                            <Label style="-fx-text-fill: #3498db; -fx-font-size: 13px; -fx-font-weight: bold;" text="Water" />
                            <Label style="-fx-text-fill: #CCCCCC; -fx-font-size: 11px;" text="+1 capacity per level" />
                        </VBox>
                        <Label style="-fx-text-fill: rgba(255,255,255,0.3); -fx-font-size: 20px;" text="|" />
                        <VBox alignment="CENTER" spacing="2">
                            <Label style="-fx-text-fill: #27ae60; -fx-font-size: 13px; -fx-font-weight: bold;" text="Harvest" />
                            <Label style="-fx-text-fill: #CCCCCC; -fx-font-size: 11px;" text="+2% bonus per level" />
                        </VBox>
                    </HBox>

                </VBox>

                <!-- DIVIDER -->
                <Region style="-fx-background-color: rgba(255,255,255,0.15); -fx-pref-width: 2; -fx-min-height: 350;" />

                <!-- RIGHT SECTION: ITEMS -->
                <VBox alignment="CENTER" spacing="20">

                    <Label style="-fx-font-family: 'Georgia'; -fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #FDF8E8; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.7), 5, 0.5, 0, 2);" text="ITEMS" />
                    <Label style="-fx-font-family: 'Segoe UI'; -fx-font-size: 14px; -fx-text-fill: #FDF8E8; -fx-font-style: italic; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.6), 3, 0.5, 0, 1);" text="Consumable items for your crops!" />

                    <Region prefHeight="10" />

                    <!-- Fertilizer Card -->
                    <VBox alignment="CENTER" prefWidth="180" spacing="8" styleClass="upgrade-card" style="-fx-border-color: #8B4513; -fx-border-width: 2;">
                        <padding><Insets bottom="18" left="20" right="20" top="18" /></padding>
                        <Label style="-fx-font-size: 32px;" text="ðŸŒ±" />
                        <Label style="-fx-text-fill: #8B4513; -fx-font-family: 'Georgia'; -fx-font-size: 16px; -fx-font-weight: bold;" text="FERTILIZER" />
                        <Label fx:id="fertilizerCountLabel" styleClass="upgrade-level" text="Owned: 0" />
                        <VBox alignment="CENTER" spacing="2">
                            <Label style="-fx-font-size: 11px; -fx-text-fill: #888888;" text="Quality: +10-25%" />
                            <Label style="-fx-font-size: 11px; -fx-text-fill: #888888;" text="Speed: -1 to -2 days" />
                        </VBox>
                        <Region prefHeight="3" />
                        <Label styleClass="upgrade-cost" text="50 coins" />
                        <Button onAction="#onBuyFertilizer" prefWidth="100" styleClass="upgrade-btn" text="BUY" />
                    </VBox>

                    <Region prefHeight="12" />

                    <!-- Items Info -->
                    <HBox alignment="CENTER" spacing="15" style="-fx-background-color: rgba(0,0,0,0.4); -fx-background-radius: 12; -fx-padding: 12 20;">
                        <VBox alignment="CENTER" spacing="2">
                            <Label style="-fx-text-fill: #8B4513; -fx-font-size: 13px; -fx-font-weight: bold;" text="Fertilizer" />
                            <Label style="-fx-text-fill: #CCCCCC; -fx-font-size: 11px;" text="Use on growing crops" />
                        </VBox>
                    </HBox>

                </VBox>

            </HBox>
        </center>

        <!-- FOOTER -->
        <bottom>
            <HBox alignment="CENTER">
                <padding><Insets bottom="25" top="15" /></padding>
                <Button onAction="#onBackClicked" prefHeight="45" prefWidth="200" styleClass="menu-btn-back" text="BACK TO FARM" />
            </HBox>
        </bottom>

    </BorderPane>

    <!-- INFO POPUP -->
    <VBox fx:id="infoPopup" alignment="CENTER" managed="false" styleClass="overlay-bg" visible="false">
        <VBox maxWidth="400" minWidth="350" spacing="18" styleClass="popup-box-small">
            <padding><Insets bottom="25" left="35" right="35" top="25" /></padding>
            <Label fx:id="infoPopupLabel" styleClass="popup-text-small" text="" wrapText="true" />
            <Button onAction="#onInfoPopupClose" prefWidth="100" styleClass="menu-btn-primary" text="OK" />
        </VBox>
    </VBox>

    <!-- CONFIRM POPUP -->
    <VBox fx:id="confirmPopup" alignment="CENTER" managed="false" styleClass="overlay-bg" visible="false">
        <VBox maxWidth="450" minWidth="400" spacing="20" styleClass="popup-box">
            <padding><Insets bottom="28" left="38" right="38" top="28" /></padding>
            <Label style="-fx-text-fill: #E65100;" styleClass="popup-title" text="WARNING" />
            <Label fx:id="confirmPopupLabel" styleClass="popup-message" text="" wrapText="true" />
            <HBox alignment="CENTER" spacing="20">
                <Button onAction="#onConfirmYes" prefHeight="45" prefWidth="110" styleClass="menu-btn-danger" text="YES" />
                <Button onAction="#onConfirmNo" prefHeight="45" prefWidth="110" styleClass="menu-btn-back" text="NO" />
            </HBox>
        </VBox>
    </VBox>

    <!-- PURCHASE RESULT POPUP -->
    <VBox fx:id="purchaseResultPopup" alignment="CENTER" managed="false" styleClass="overlay-bg" visible="false">
        <VBox maxWidth="420" minWidth="380" spacing="20" styleClass="popup-box-success">
            <padding><Insets bottom="30" left="40" right="40" top="30" /></padding>
            <Label styleClass="popup-title-success" text="SEED OBTAINED!" />
            <Label fx:id="purchaseResultLabel" styleClass="harvest-crop-name" text="You got: Wheat" />
            <Label fx:id="purchaseNewLabel" style="-fx-font-size: 18px;" text="(Common)" />
            <Label styleClass="popup-submessage" text="Added to your inventory!" />
            <Button onAction="#onPurchaseResultClose" prefHeight="45" prefWidth="140" styleClass="menu-btn-primary" text="NICE!" />
        </VBox>
    </VBox>

</StackPane>
